<!DOCTYPE html>
<!--[if lt IE 9]><html class="no-js lt-ie9" lang="en" dir="ltr"><![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en" dir="ltr">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->
    <title>FGP</title>
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <!-- Meta data -->
    <meta name="description" content="The home page of the Federal Geospatial Platform">
    <meta name="dcterms.title" content="Home page - Federal Geospatial Platform">
    <meta name="dcterms.creator" content="Natural Resources Canada">
    <meta name="dcterms.issued" title="W3CDTF" content="2015-08-06">
    <meta name="dcterms.modified" title="W3CDTF" content="2015-08-06">
    <meta name="dcterms.subject" title="scheme" content="">
    <meta name="dcterms.language" title="ISO639-2" content="eng">
    <!-- Meta data-->
    <!--[if gte IE 9 | !IE ]><!-->
    <link href="//fgpv.cloudapp.net/demo/wet/theme-gc-intranet/assets/favicon.ico" rel="icon" type="image/x-icon">
    <link rel="stylesheet" href="//fgpv.cloudapp.net/demo/wet/theme-gc-intranet/css/theme.min.css">
    <!--<![endif]-->
    <!--[if lt IE 9]>
<link href="//fgpv.cloudapp.net/demo/wet/theme-gc-intranet/assets/favicon.ico" rel="shortcut icon" />
<link rel="stylesheet" href="//fgpv.cloudapp.net/demo/wet/theme-gc-intranet/css/ie8-theme.min.css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="//fgpv.cloudapp.net/demo/wet4.0.20/wet-boew/js/ie8-wet-boew.min.js"></script>
<![endif]-->
    <link rel="stylesheet" href="//fgpv.cloudapp.net/demo/fgp/fgp.css">
    <noscript>
        <link rel="stylesheet" href="//fgpv.cloudapp.net/demo/wet4.0.20/wet-boew/css/noscript.min.css" />
    </noscript>
    <style>
        .fgpv {
            height: 700px;
            border: 1px solid black;
            margin: 50px;
            position: relative;
        }
    </style>
</head>

<body vocab="http://schema.org/" typeof="WebPage">
    <ul id="wb-tphp">
        <li class="wb-slc">
            <a class="wb-sl" href="#wb-cont">Skip to main content</a>
        </li>
        <li class="wb-slc visible-sm visible-md visible-lg">
            <a class="wb-sl" href="#wb-info">Skip to "About this site"</a>
        </li>
    </ul>
    <header role="banner">
        <div id="wb-bnr">
            <div id="wb-bar">
                <div class="container">
                    <div class="row">
                        <object id="gcwu-sig" type="image/svg+xml" tabindex="-1" role="img" data="//fgpv.cloudapp.net/demo/wet/theme-gc-intranet/assets/sig-blk-en.svg" aria-label="Government of Canada"></object>
                        <section id="wb-lng">
                            <h2>Language selection</h2>
                            <ul class="list-inline">
                                <li><a lang="fr" href="index-fgp-fr.html">Français</a>
                                </li>
                            </ul>
                        </section>
                        <section class="wb-mb-links col-xs-12 visible-sm visible-xs" id="wb-glb-mn">
                            <h2>Search and menus</h2>
                            <ul class="pnl-btn list-inline text-right">
                                <li>
									<a href="#mb-pnl" title="Menus" aria-controls="mb-pnl" class="overlay-lnk btn btn-sm btn-default" role="button">
											<span class="glyphicon glyphicon-th-list">
												<span class="wb-inv">Menus</span>
											</span>
									</a>
                                </li>
                            </ul>
                            <div id="mb-pnl"></div>
                        </section>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div id="wb-sttl" class="col-md-12">
						<h1 class="fgp-sttl">
							<a href="/en/fgp-intranet.html"><img src="//fgpv.cloudapp.net/demo/fgp/images/fgp_light.png" alt="FGP wordmark" class="mrgn-rght-lg"/>Federal Geospatial Platform</a>
						</h1>
                        <object id="wmms" type="image/svg+xml" tabindex="-1" role="img" data="//fgpv.cloudapp.net/demo/wet/theme-gc-intranet/assets/wmms-intra.svg" aria-label="Symbol of the Government of Canada"></object>
                    </div>
					<!--
                    <section id="wb-srch" class="visible-md visible-lg">
                        <h2>Search</h2>
                        <form action="https://google.ca/search" method="get" role="search" class="form-inline">
                            <div class="form-group">
                                <label for="wb-srch-q">Search website</label>
                                <input id="wb-srch-q" class="form-control" name="q" type="search" value="" size="27" maxlength="150">
                                <input type="hidden" name="q" value="site:wet-boew.github.io OR site:github.com/wet-boew/">
                            </div>
                            <button type="submit" id="wb-srch-sub" class="btn btn-default">Search</button>
                        </form>
                    </section>
					-->
                </div>
            </div>
        </div>
        <nav role="navigation" id="wb-sm" data-ajax-replace="//fgpv.cloudapp.net/demo/wet4.0.20/ajax/sitemenu-en.html" data-trgt="mb-pnl" class="wb-menu visible-md visible-lg" typeof="SiteNavigationElement">
        </nav>
        <nav role="navigation" id="wb-bc" property="breadcrumb">
            <h2>You are here:</h2>
            <div class="container">
                <div class="row">
                    <ol class="breadcrumb">
                        <li>
                            <a href="/en/fgp-intranet.html">Home</a>
                        </li>
                        <li>Content page</li>
                    </ol>
                </div>
            </div>
        </nav>
    </header>
    <main id="wb-cont" role="main" property="mainContentOfPage" class="container">
        <div style="display:flex;">
            <button onclick="getBookmark()">Get Link</button>
            <input type="text" id="bookmarkDisplay" style="width:100%;"></input>
        </div>
        <div id="fgpmap" class="fgpv" rv-config="config.rcs.en-CA.json" rv-service-endpoint="http://section917.cloudapp.net:8000/" rv-restore-bookmark="bookmark"></div>
    </main>
    <footer role="contentinfo" id="wb-info" class="visible-sm visible-md visible-lg wb-navcurr">
    </footer>
    <!--[if gte IE 9 | !IE ]><!-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.js"></script>
    <script src="//fgpv.cloudapp.net/demo/wet4.0.20/wet-boew/js/wet-boew.min.js"></script>

    <!-- support config file change via 'config' URL parameter. -->
    <script>
        // credit: http://stackoverflow.com/a/21903119
        function getUrlParameter(sParam) {
            var sPageURL = decodeURIComponent(window.location.search.substring(1)),
                sURLVariables = sPageURL.split('&'),
                sParameterName,
                i;

            for (i = 0; i < sURLVariables.length; i++) {
                sParameterName = sURLVariables[i].split('=');

                if (sParameterName[0] === sParam) {
                    return sParameterName[1] === undefined ? true : sParameterName[1];
                }
            }
        }

        var testConfig = getUrlParameter('config');
        if (testConfig) {
            document.getElementById("fgpmap").setAttribute("rv-config", testConfig);
        }
    </script>


    <!--<![endif]-->
    <!--[if lt IE 9]>
<script src="//fgpv.cloudapp.net/demo/wet4.0.20/wet-boew/js/ie8-wet-boew2.min.js"></script>

<![endif]-->
    <script src="//fgpv.cloudapp.net/demo/wet/theme-gc-intranet/js/theme.min.js"></script>
    <script src="//fgpv.cloudapp.net/demo/fgp/javascript/fgp.js"></script>
    <script type="text/javascript">
        $('#wb-info').load( "fgpFooter.html" );
    </script>
    <script>
        $( document ).ready(function() {
            // See if the user logged in GeoNetwork
            fgpGetLoggedInUser();
        });
    </script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      //If we are on PROD run the script, if not, do not
      var cururl = window.location.hostname;
      if ((cururl === 'gcgeo.gc.ca') || (cururl === 'www.gcgeo.gc.ca')) {
          ga('create', 'UA-66832240-1', 'auto');
          ga("set", "anonymizeIp", true);
          ga('send', 'pageview');
      }
    </script>

    <!-- inject:js -->
    <!-- endinject -->

    <script>
        function queryStringToJSON(q) {
            var pairs = q.search.slice(1).split('&');

            var result = {};
            pairs.forEach(function(pair) {
                pair = pair.split('=');
                result[pair[0]] = decodeURIComponent(pair[1] || '');
            });

            return JSON.parse(JSON.stringify(result));
        }

        // grab & process the url
        var queryStr = queryStringToJSON(document.location);
        var keys = queryStr.keys;
        if (keys) {
            // turn keys into an array, pass them to the map
            var keysArr = keys.split(',');
            RV.getMap('fgpmap').loadRcsLayers(keysArr);
        }

        function bookmark(){
            return new Promise(function (resolve) {
                var bookmark = queryStr.rv;
                console.log(bookmark);
                resolve(bookmark);
            });
        }

        function getBookmark(){
            RV.getMap('fgpmap').getBookmark().then(function (bookmark) {
                document.getElementById("bookmarkDisplay").value = window.location.href.split('?')[0] + '?rv=' + String(bookmark);
            });
        }
    </script>
</body>

</html>